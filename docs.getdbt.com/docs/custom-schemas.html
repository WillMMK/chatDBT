<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-docs/build/custom-schemas">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Custom schemas | dbt Developer Hub</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.getdbt.com/img/avatar.png"><meta data-rh="true" name="twitter:image" content="https://docs.getdbt.com/img/avatar.png"><meta data-rh="true" property="og:url" content="https://docs.getdbt.com/docs/build/custom-schemas"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Custom schemas | dbt Developer Hub"><meta data-rh="true" name="description" content="What is a custom schema?"><meta data-rh="true" property="og:description" content="What is a custom schema?"><link data-rh="true" rel="canonical" href="custom-schemas.html"><link data-rh="true" rel="alternate" href="custom-schemas.html" hreflang="en"><link data-rh="true" rel="alternate" href="custom-schemas.html" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://57ZWAOQC7F-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="https://docs.getdbt.com/blog/rss.xml" title="dbt Developer Hub RSS Feed">
<link rel="alternate" type="application/atom+xml" href="https://docs.getdbt.com/blog/atom.xml" title="dbt Developer Hub Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="dbt Developer Hub" href="https://docs.getdbt.com/opensearch.xml">






<link href='https://d33wubrfki0l68.cloudfront.net/bundles/86c2f19a2ae35828239a5a9362ae97a45a3e36b0.css' rel='stylesheet'/>



<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;500;600;700&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;500;600;700&display=swap">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<link rel="icon" href="https://docs.getdbt.com/img/favicon.png" type="image/png">
<link rel="icon" href="https://docs.getdbt.com/img/favicon.svg" type="image/svg+xml">
<script src="https://code.jquery.com/jquery-3.4.1.min.js" defer="defer"></script>
<script src="https://cdn.jsdelivr.net/npm/featherlight@1.7.14/release/featherlight.min.js" defer="defer"></script>
<script src='https://d33wubrfki0l68.cloudfront.net/bundles/d791b6693c16c1841df84779b9b34e5f51a8490a.js'></script>
<script src="https://kit.fontawesome.com/7110474d41.js"></script><link href='https://d33wubrfki0l68.cloudfront.net/css/3b1f6b4f93b09261fa00a0957b856c308256f0dc/assets/css/styles.da37ce3e.css' rel='stylesheet'/>
<link rel="preload" href="https://docs.getdbt.com/assets/js/runtime~main.2cb82f36.js" as="script">
<link rel="preload" href="https://docs.getdbt.com/assets/js/main.55105ca8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="custom-schemas.html#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_s0pr" style="background-color:#047377;color:#fff" role="banner"><div class="announcementBarPlaceholder_qxfj"></div><a target="_blank" rel="noopener noreferrer" href="https://www.getdbt.com/resources/staging-april-2023/?utm_medium=internal&amp;utm_source=docs&amp;utm_campaign=q1-2024_staging_ex&amp;utm_content=staging____&amp;utm_term=knowledge-builder_all__" class="announcementBarLink_lVWg" style="background-color:#047377;color:#fff"><div class="content_knG7 announcementBarContent_dpRF">See what's new in dbt â€” join us at Staging on April 26!</div></a><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_iXyO"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand dbt__brand" href="https://docs.getdbt.com/"><div class="navbar__logo"><img src="https://d33wubrfki0l68.cloudfront.net/38a468b6bb7aeae799ea43bb9510af0753b90d91/42e9b/img/dbt-logo.svg" alt="dbt Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://d33wubrfki0l68.cloudfront.net/b8dc46ef553c76847d944665fe5cebdea2e86542/83803/img/dbt-logo-light.svg" alt="dbt Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="../index.html">Docs</a><a class="navbar__item navbar__link" href="https://docs.getdbt.com/reference/dbt_project.yml">Reference</a><div class="navbar__item dropdown dropdown--hoverable"><a href="custom-schemas.html#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link nav-versioning">v </a><ul class="dropdown__menu"><li><a class="dropdown__link nav-versioning-dropdown__link">1.5<!-- --> (Beta)</a></li><li><a class="dropdown__link nav-versioning-dropdown__link">1.4</a></li><li><a class="dropdown__link nav-versioning-dropdown__link">1.3</a></li><li><a class="dropdown__link nav-versioning-dropdown__link">1.2</a></li><li><a class="dropdown__link nav-versioning-dropdown__link">1.1</a></li><li><a class="dropdown__link nav-versioning-dropdown__link">1.0</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="custom-schemas.html#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Resources</a><ul class="dropdown__menu"><li><a href="https://courses.getdbt.com" target="_blank" rel="noopener noreferrer" class="dropdown__link">Courses<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="https://docs.getdbt.com/guides/best-practices">Guides</a></li><li><a class="dropdown__link" href="https://docs.getdbt.com/blog">Developer Blog</a></li><li><a class="dropdown__link" href="https://docs.getdbt.com/glossary">Glossary</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="custom-schemas.html#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="https://docs.getdbt.com/community/join">Join the Community</a></li><li><a class="dropdown__link" href="https://docs.getdbt.com/community/contribute">Become a contributor</a></li><li><a class="dropdown__link" href="https://docs.getdbt.com/community/forum">Community Forum</a></li><li><a class="dropdown__link" href="https://docs.getdbt.com/community/events">Events</a></li></ul></div><a href="https://www.getdbt.com/signup/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link nav-create-account button button--primary">Create a free account</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="https://docs.getdbt.com/"><img src="https://d33wubrfki0l68.cloudfront.net/38a468b6bb7aeae799ea43bb9510af0753b90d91/42e9b/img/dbt-logo.svg" alt="dbt Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://d33wubrfki0l68.cloudfront.net/b8dc46ef553c76847d944665fe5cebdea2e86542/83803/img/dbt-logo-light.svg" alt="dbt Logo" class="themedImage_ToTc themedImage--dark_i4oU"></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../index.html">What is dbt?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../supported-data-platforms.html">Supported data platforms</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="../cloud/about-cloud/dbt-cloud-features.html">About dbt Cloud</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="../quickstarts/overview.html">Quickstarts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="../about-setup.html">Set up dbt</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="projects.html">Build dbt projects</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="projects.html">About dbt projects</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="sources.html">Build your DAG</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="tests.html">Enhance your models</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="jinja-macros.html">Enhance your code</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="custom-schemas.html">Organize your outputs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="custom-schemas.html">Custom schemas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="custom-databases.html">Custom databases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="custom-aliases.html">Custom aliases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="custom-target-names.html">Custom target names</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="../deploy/deployments.html">Deploy dbt jobs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deploy dbt jobs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="../collaborate/environments/environments-in-dbt.html">Collaborate with others</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="../use-dbt-semantic-layer/quickstart-semantic-layer.html">Use the dbt Semantic Layer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="../dbt-cloud-apis/overview.html">dbt APIs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="../core-versions.html">Available dbt versions</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../dbt-support.html">dbt support</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="../faqs.html">Frequently asked questions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Frequently asked questions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_RiV8"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="https://docs.getdbt.com/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Build dbt projects</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Organize your outputs</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Custom schemas</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_EDxc"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Custom schemas</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-is-a-custom-schema">What is a custom schema?<a href="custom-schemas.html#what-is-a-custom-schema" class="hash-link" aria-label="Direct link to What is a custom schema?" title="Direct link to What is a custom schema?">â€‹</a></h2><p>By default, all dbt models are built in the schema specified in your target. In dbt projects with lots of models, it may be useful to instead build some models in schemas other than your target schema â€“ this can help logically group models together.</p><p>For example, you may wish to:</p><ul><li>Group models based on the business unit using the model, creating schemas such as <code>core</code>, <code>marketing</code>, <code>finance</code> and <code>support</code>; or,</li><li>Hide intermediate models in a <code>staging</code> schema, and only present models that should be queried by an end user in an <code>analytics</code> schema.</li></ul><p>You can use <strong>custom schemas</strong> in dbt to build models in a schema other than your target schema. It&#x27;s important to note that by default, dbt will generate the schema name for a model by <strong>concatenating the custom schema to the target schema</strong>, as in: <code>&lt;target_schema&gt;_&lt;custom_schema&gt;;</code>.</p><table><thead><tr><th>Target schema</th><th>Custom schema</th><th>Resulting schema</th></tr></thead><tbody><tr><td>&lt;<!-- -->target_schema<!-- -->&gt;</td><td>None</td><td>&lt;<!-- -->target_schema<!-- -->&gt;</td></tr><tr><td>analytics</td><td>None</td><td>analytics</td></tr><tr><td>dbt_alice</td><td>None</td><td>dbt_alice</td></tr><tr><td>&lt;<!-- -->target_schema<!-- -->&gt;</td><td>&lt;<!-- -->custom_schema<!-- -->&gt;</td><td>&lt;<!-- -->target_schema<!-- -->&gt;<!-- -->_<!-- -->&lt;<!-- -->custom_schema<!-- -->&gt;</td></tr><tr><td>analytics</td><td>marketing</td><td>analytics_marketing</td></tr><tr><td>dbt_alice</td><td>marketing</td><td>dbt_alice_marketing</td></tr></tbody></table><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-do-i-use-custom-schemas">How do I use custom schemas?<a href="custom-schemas.html#how-do-i-use-custom-schemas" class="hash-link" aria-label="Direct link to How do I use custom schemas?" title="Direct link to How do I use custom schemas?">â€‹</a></h2><p>Use the <code>schema</code> configuration key to specify a custom schema for a model. As with any configuration, you can either:</p><ul><li>apply this configuration to a specific model by using a config block within a model, or</li><li>apply it to a subdirectory of models by specifying it in your <code>dbt_project.yml</code> file</li></ul><div class="wrapper_V0Zw"><div class="title_BmGx"><div class="titleInner_QNi1"><svg class="icon_E6qs" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.5 5L10 7.5 7.5 10l-.75-.75L8.5 7.5 6.75 5.75 7.5 5zm-3 0L2 7.5 4.5 10l.75-.75L3.5 7.5l1.75-1.75L4.5 5zM0 13V2c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v11c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1zm1 0h10V2H1v11z"></path></svg><span>orders.sql</span></div></div><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-sql codeBlock_qGQc thin-scrollbar"><code class="codeBlockLines_p187"><span class="token-line" style="color:#d6deeb"><span class="token plain">{{ config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">schema</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;marketing&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> }}</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">select</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="wrapper_V0Zw"><div class="title_BmGx"><div class="titleInner_QNi1"><svg class="icon_E6qs" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.5 5L10 7.5 7.5 10l-.75-.75L8.5 7.5 6.75 5.75 7.5 5zm-3 0L2 7.5 4.5 10l.75-.75L3.5 7.5l1.75-1.75L4.5 5zM0 13V2c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v11c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1zm1 0h10V2H1v11z"></path></svg><span>dbt_project.yml</span></div></div><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar"><code class="codeBlockLines_p187"><span class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># models in `models/marketing/ will be rendered to the &quot;*_marketing&quot; schema</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token key atrule" style="color:rgb(255, 203, 139)">models</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token key atrule" style="color:rgb(255, 203, 139)">my_project</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token key atrule" style="color:rgb(255, 203, 139)">marketing</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token key atrule" style="color:rgb(255, 203, 139)">+schema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> marketing</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="understanding-custom-schemas">Understanding custom schemas<a href="custom-schemas.html#understanding-custom-schemas" class="hash-link" aria-label="Direct link to Understanding custom schemas" title="Direct link to Understanding custom schemas">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="why-does-dbt-concatenate-the-custom-schema-to-the-target-schema">Why does dbt concatenate the custom schema to the target schema?<a href="custom-schemas.html#why-does-dbt-concatenate-the-custom-schema-to-the-target-schema" class="hash-link" aria-label="Direct link to Why does dbt concatenate the custom schema to the target schema?" title="Direct link to Why does dbt concatenate the custom schema to the target schema?">â€‹</a></h3><p>When first using custom schemas, it&#x27;s common to assume that a model will be built in a schema that matches the <code>schema</code> configuration exactly, for example, a model that has the configuration <code>schema: marketing</code>, would be built in the <code>marketing</code> schema. However, dbt instead creates it in a schema like <code>&lt;target_schema&gt;_marketing</code> by defaultÂ â€“ there&#x27;s a good reason for this!</p><p>In a typical setup of dbt, each dbt user will use a separate target schema (see <a href="custom-schemas.html#managing-environments">Managing Environments</a>). If dbt created models in a schema that matches a model&#x27;s custom schema exactly, every dbt user would create models in the same schema.</p><p>Further, the schema that your development models are built in would be the same schema that your production models are built in! Instead, concatenating the custom schema to the target schema helps create distinct schema names, reducing naming conflicts.</p><p>If you prefer to use different logic for generating a schema name, you can change the way dbt generates a schema name (see below).</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-does-dbt-generate-a-models-schema-name">How does dbt generate a model&#x27;s schema name?<a href="custom-schemas.html#how-does-dbt-generate-a-models-schema-name" class="hash-link" aria-label="Direct link to How does dbt generate a model&#x27;s schema name?" title="Direct link to How does dbt generate a model&#x27;s schema name?">â€‹</a></h3><p>Under the hood, dbt uses a macro called <code>generate_schema_name</code> to determine the name of the schema that a model should be built in. The code for the macro that expresses the current logic follows:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-sql codeBlock_qGQc thin-scrollbar"><code class="codeBlockLines_p187"><span class="token-line" style="color:#d6deeb"><span class="token plain">{</span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token plain"> macro generate_schema_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">custom_schema_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token plain">}</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    {</span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">set</span><span class="token plain"> default_schema </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword" style="color:rgb(127, 219, 202)">schema</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token plain">}</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    {</span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> custom_schema_name </span><span class="token operator" style="color:rgb(127, 219, 202)">is</span><span class="token plain"> none </span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token plain">}</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        {{ default_schema }}</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    {</span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">else</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token plain">}</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        {{ default_schema }}_{{ custom_schema_name </span><span class="token operator" style="color:rgb(127, 219, 202)">|</span><span class="token plain"> trim }}</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    {</span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token plain"> endif </span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token plain">}</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">{</span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token plain"> endmacro </span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="advanced-custom-schema-configuration">Advanced custom schema configuration<a href="custom-schemas.html#advanced-custom-schema-configuration" class="hash-link" aria-label="Direct link to Advanced custom schema configuration" title="Direct link to Advanced custom schema configuration">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="changing-the-way-dbt-generates-a-schema-name">Changing the way dbt generates a schema name<a href="custom-schemas.html#changing-the-way-dbt-generates-a-schema-name" class="hash-link" aria-label="Direct link to Changing the way dbt generates a schema name" title="Direct link to Changing the way dbt generates a schema name">â€‹</a></h3><p>If your dbt project includes a macro that is also named <code>generate_schema_name</code>, dbt will <em>always use the macro in your dbt project</em> instead of the default macro.</p><p>Therefore, to change the way dbt generates a schema name, you should add a macro named <code>generate_schema_name</code> to your project, where you can then define your own logic.</p><p>Note: dbt ignores any custom <code>generate_schema_name</code> macros that are part of a package installed in your project.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="an-alternative-pattern-for-generating-schema-names">An alternative pattern for generating schema names<a href="custom-schemas.html#an-alternative-pattern-for-generating-schema-names" class="hash-link" aria-label="Direct link to An alternative pattern for generating schema names" title="Direct link to An alternative pattern for generating schema names">â€‹</a></h3><p>A frequently used pattern for generating schema names is to change the behavior based on dbt&#x27;s environment, such that:</p><ul><li><p>In prod:</p><ul><li>If a custom schema is provided, a model&#x27;s schema name should match the custom schema, rather than being concatenated to the target schema.</li><li>If no custom schema is provided, a model&#x27;s schema name should match the target schema.</li></ul></li><li><p>In other environments (e.g. <code>dev</code> or <code>qa</code>):</p><ul><li>Build <em>all</em> models in the target schema, as in, ignore custom schema configurations.</li></ul></li></ul><p>dbt ships with a global macro that contains this logic â€“ <code>generate_schema_name_for_env</code>.</p><p>If you want to use this pattern, you&#x27;ll need a <code>generate_schema_name</code> macro in your project that points to this logic. You can do this by creating a file in your <code>macros</code> directory (we normally call it <code>get_custom_schema.sql</code>), and pasting in the following:</p><div class="wrapper_V0Zw"><div class="title_BmGx"><div class="titleInner_QNi1"><svg class="icon_E6qs" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.5 5L10 7.5 7.5 10l-.75-.75L8.5 7.5 6.75 5.75 7.5 5zm-3 0L2 7.5 4.5 10l.75-.75L3.5 7.5l1.75-1.75L4.5 5zM0 13V2c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v11c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1zm1 0h10V2H1v11z"></path></svg><span>macros/get_custom_schema.sql</span></div></div><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-sql codeBlock_qGQc thin-scrollbar"><code class="codeBlockLines_p187"><span class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">-- put this in macros/get_custom_schema.sql</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">{</span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token plain"> macro generate_schema_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">custom_schema_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token plain">}</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    {{ generate_schema_name_for_env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">custom_schema_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> }}</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">{</span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token plain"> endmacro </span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><p><strong>Note:</strong> When using this macro, you&#x27;ll need to set the target name in your job specifically to &quot;prod&quot; if you want custom schemas to be applied.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="generate_schema_name-arguments">generate_schema_name arguments<a href="custom-schemas.html#generate_schema_name-arguments" class="hash-link" aria-label="Direct link to generate_schema_name arguments" title="Direct link to generate_schema_name arguments">â€‹</a></h3><table><thead><tr><th>Argument</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>custom_schema_name</td><td>The configured value of <code>schema</code> in the specified node, or <code>none</code> if a value is not supplied</td><td><code>marketing</code></td></tr><tr><td>node</td><td>The <code>node</code> that is currently being processed by dbt</td><td><code>{&quot;name&quot;: &quot;my_model&quot;, &quot;resource_type&quot;: &quot;model&quot;,...}</code></td></tr></tbody></table><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="jinja-context-available-in-generate_schema_name">Jinja context available in generate_schema_name<a href="custom-schemas.html#jinja-context-available-in-generate_schema_name" class="hash-link" aria-label="Direct link to Jinja context available in generate_schema_name" title="Direct link to Jinja context available in generate_schema_name">â€‹</a></h3><p>If you choose to write custom logic to generate a schema name, it&#x27;s worth noting that not all variables and methods are available to you when defining this logic. In other words: the <code>generate_schema_name</code> macro is compiled with a limited Jinja context.</p><p>The following context methods <em>are</em> available in the <code>generate_schema_name</code> macro:</p><table><thead><tr><th>Jinja context</th><th>Type</th><th>Available</th></tr></thead><tbody><tr><td><a href="https://docs.getdbt.com/reference/dbt-jinja-functions/target">target</a></td><td>Variable</td><td>âœ…</td></tr><tr><td><a href="https://docs.getdbt.com/reference/dbt-jinja-functions/env_var">env_var</a></td><td>Variable</td><td>âœ…</td></tr><tr><td><a href="https://docs.getdbt.com/reference/dbt-jinja-functions/var">var</a></td><td>Variable</td><td>Limited, see below</td></tr><tr><td><a href="https://docs.getdbt.com/reference/dbt-jinja-functions/exceptions">exceptions</a></td><td>Macro</td><td>âœ…</td></tr><tr><td><a href="https://docs.getdbt.com/reference/dbt-jinja-functions/log">log</a></td><td>Macro</td><td>âœ…</td></tr><tr><td>Other macros in your project</td><td>Macro</td><td>âœ…</td></tr><tr><td>Other macros in your packages</td><td>Macro</td><td>âœ…</td></tr></tbody></table><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="which-vars-are-available-in-generate_schema_name">Which vars are available in generate_schema_name?<a href="custom-schemas.html#which-vars-are-available-in-generate_schema_name" class="hash-link" aria-label="Direct link to Which vars are available in generate_schema_name?" title="Direct link to Which vars are available in generate_schema_name?">â€‹</a></h4><div style="margin-bottom:10px"><span>â–¶<span style="cursor:pointer;font-style:italic;margin-left:5px">Changelog</span></span></div><p>Globally-scoped variables and variables defined on the command line with
<a href="project-variables.html">--vars</a> are accessible in the <code>generate_schema_name</code> context.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="managing-environments">Managing environments<a href="custom-schemas.html#managing-environments" class="hash-link" aria-label="Direct link to Managing environments" title="Direct link to Managing environments">â€‹</a></h2><p>In the <code>generate_schema_name</code> macro examples shown above, the <code>target.name</code> context variable is used to change the schema name that dbt generates for models. If the <code>generate_schema_name</code> macro in your project uses the <code>target.name</code> context variable, you must additionally ensure that your different dbt environments are configured appropriately. While you can use any naming scheme you&#x27;d like, we typically recommend:</p><ul><li><strong>dev</strong>: Your local development environment; configured in a <code>profiles.yml</code> file on your computer.</li></ul><ul><li><strong>ci</strong>:  A <a href="../cloud/git/connect-github.html">continuous integration</a> environment running on Pull Requests in GitHub, GitLab, etc.</li></ul><ul><li><strong>prod</strong>: The production deployment of your dbt project, like in dbt Cloud, Airflow, or <a href="../deploy/deployments.html">similar</a>.</li></ul><p>If your schema names are being generated incorrectly, double check your target name in the relevant environment.</p><p>For more information, consult the <a href="../collaborate/environments/dbt-core-environments.html">managing environments in dbt Core</a> guide.</p></div><div class="customSearchWeight_fp9e algolia-custom-search-weight">0</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/dbt-labs/docs.getdbt.com/edit/current/website/docs/docs/build/custom-schemas.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-02-28T20:22:50.000Z">Feb 28, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="hooks-operations.html"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Hooks and operations</div></a><a class="pagination-nav__link pagination-nav__link--next" href="custom-databases.html"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Custom databases</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jeP5 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="custom-schemas.html#what-is-a-custom-schema" class="table-of-contents__link toc-highlight">What is a custom schema?</a></li><li><a href="custom-schemas.html#how-do-i-use-custom-schemas" class="table-of-contents__link toc-highlight">How do I use custom schemas?</a></li><li><a href="custom-schemas.html#understanding-custom-schemas" class="table-of-contents__link toc-highlight">Understanding custom schemas</a><ul><li><a href="custom-schemas.html#why-does-dbt-concatenate-the-custom-schema-to-the-target-schema" class="table-of-contents__link toc-highlight">Why does dbt concatenate the custom schema to the target schema?</a></li><li><a href="custom-schemas.html#how-does-dbt-generate-a-models-schema-name" class="table-of-contents__link toc-highlight">How does dbt generate a model&#39;s schema name?</a></li></ul></li><li><a href="custom-schemas.html#advanced-custom-schema-configuration" class="table-of-contents__link toc-highlight">Advanced custom schema configuration</a><ul><li><a href="custom-schemas.html#changing-the-way-dbt-generates-a-schema-name" class="table-of-contents__link toc-highlight">Changing the way dbt generates a schema name</a></li><li><a href="custom-schemas.html#an-alternative-pattern-for-generating-schema-names" class="table-of-contents__link toc-highlight">An alternative pattern for generating schema names</a></li><li><a href="custom-schemas.html#generate_schema_name-arguments" class="table-of-contents__link toc-highlight">generate_schema_name arguments</a></li><li><a href="custom-schemas.html#jinja-context-available-in-generate_schema_name" class="table-of-contents__link toc-highlight">Jinja context available in generate_schema_name</a></li></ul></li><li><a href="custom-schemas.html#managing-environments" class="table-of-contents__link toc-highlight">Managing environments</a></li></ul><div class="col margin-top--sm"><a href="https://github.com/dbt-labs/docs.getdbt.com/edit/current/website/docs/docs/build/custom-schemas.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><span class="footer__link-item">
          <div class="footer__items">
            <a href="https://www.getdbt.com/cloud/terms/">Terms of Service</a>
            <a href="https://www.getdbt.com/cloud/privacy-policy/">Privacy Policy</a>
            <a href="https://www.getdbt.com/security/">Security</a>
            <button id="ot-sdk-btn" onclick="openPreferenceCenter()">Cookie Settings</button>
          </div>

          <div class="footer__items--right">
            <a href="https://twitter.com/getdbt"><i class="fa-brands fa-twitter"></i></a>
            <a href="https://www.getdbt.com/community/join-the-community/"><i class="fa-brands fa-slack"></i></a>
            <a href="https://github.com/dbt-labs/dbt-core"><i class="fa-brands fa-github"></i></a>
          </div>
          </span></div></div><div class="footer__bottom text--center"><div class="footer__copyright">&copy; 2023 dbt Labs, Inc. All Rights Reserved.</div></div></div></footer></div>
<script src='https://d33wubrfki0l68.cloudfront.net/bundles/901511404cae247883dcd0602b3685c939fa20be.js'></script>
</body>
</html>